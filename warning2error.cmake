IF(NOT MSVC)
    SET(CMAKE_C_FLAGS_DEBUG "$ENV{CFLAGS} -O0 -Wall -g -ggdb")
    IF(MINGW AND WIN32)
        SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -static-libgcc -static-libstdc++ -static")
        ADD_DEFINITIONS(-DWIN32)
    ELSE()
        ADD_DEFINITIONS(-Dunix)
    ENDIF()
    SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Werror")
    ADD_DEFINITIONS(-DGNUC)
ELSE()
    SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} /WX")
    ADD_DEFINITIONS(-D_CRT_SECURE_NO_WARNINGS)
    ADD_DEFINITIONS(-D_SCL_SECURE_NO_WARNINGS)
    ADD_DEFINITIONS(-DMSVC)
ENDIF(NOT MSVC)
